package com.kamble.demo;

import java.util.Arrays;

/*
    This problem is like Dynamic Fibonacci Problem on steroids.
 */

public class Main {

    private static int[] memo;

    public static void main(String[] args) {
        int noOfStairs = 4;
        int noOfSteps = 3;

        //create an array for memoization
        /*
            Here I'm taking +1 because if noOfStairs = 4, then while checking result in memo, it will check memo[4] which
            will be out of array bounds, so we get 1 extra block in the memo array.

            Or you can look at it this way,
            We have 4 stairs, but we are storing values from 0th stair to 4th stair, so there are 5 values, that's why 5 blocks
            in memo.
         */
        memo = new int[noOfStairs + 1];

        //initialize memo array with -1
        for(int i=0; i< memo.length; i++) {
            memo[i] = -1;
        }

        int noOfWays = stairCase(noOfStairs, noOfSteps);
        System.out.println("No of ways to travel the staircase : " + noOfWays);

        System.out.println("Final Memo array : " + Arrays.toString(memo));
    }

    private static int stairCase(int noOfStairs, int noOfSteps) {

        //this condition should be at the top, because in case we get "stairCase(-1, 3)" we will get array index -1 out of bounds.
        //if stairs are negative just return 0 ways.
        if(noOfStairs < 0) return 0;

        //check if result is already in the memo, if yes, return the result.
        if(memo[noOfStairs] != -1) return memo[noOfStairs];

        //if noOfStairs are 1 there is only 1 way, so return 1
        //if noOfStairs are 0 return 1
        if(noOfStairs == 1 || noOfStairs == 0) {

            //store it in the memo
            memo[noOfStairs] = 1;
            return 1;
        }

        int noOfWays = 0;
        for(int i=1; i<=noOfSteps; i++) {
            noOfWays += stairCase(noOfStairs-i, noOfSteps);
        }

        //when we have calculated noOfWays for nth stair, store it in the memo
        memo[noOfStairs] = noOfWays;

        return noOfWays;
    }
}